# Mood Tracker API

Mood Tracker API — REST-приложение на Spring Boot для ведения дневника настроения. Проект разработан в учебных целях и демонстрирует архитектуру и принципы построения современного backend-приложения с использованием Spring-экосистемы.

## Описание

Mood Tracker API позволяет пользователям создавать записи о настроении, добавлять эмоции и теги, оставлять комментарии, фильтровать записи по различным параметрам (дата, эмоции, теги), а также получать статистику по эмоциональному состоянию. Приложение поддерживает bulk-операции (массовое создание записей), асинхронный пересчёт статистики с возможностью проверки статуса задачи и in-memory индексирование ранее выполненных запросов с корректной инвалидацией при изменении данных.

## Архитектура

Приложение построено по слоистому принципу:

Controller → Service → Repository → Database

Контроллеры обрабатывают HTTP-запросы и возвращают JSON-ответы. Сервисный слой содержит бизнес-логику. Репозитории обеспечивают доступ к данным через Spring Data JPA. Сущности отражают структуру реляционной базы данных. Для отделения API-модели от модели базы данных используются DTO и mapper-компоненты.

## Модель данных

В проекте используются следующие сущности:

- User — пользователь  
- MoodEntry — запись о настроении (ключевая сущность)  
- Emotion — эмоция  
- Tag — метка  
- Comment — комментарий  

Связи между сущностями:

- User 1 → N MoodEntry  
- MoodEntry N ↔ N Emotion  
- MoodEntry N ↔ N Tag  
- MoodEntry 1 → N Comment  

Настроены CascadeType и FetchType. Продемонстрирована проблема N+1 и её решение с использованием EntityGraph и fetch join.

## REST API

API реализовано в соответствии с REST-принципами:

- ресурсно-ориентированные URL  
- корректное использование HTTP-методов (GET, POST, PUT, DELETE)  
- stateless-подход  
- формат обмена данными — JSON  

Endpoint’ы используют PathVariable и RequestParam. Поддерживается пагинация через Pageable. Реализованы сложные JPQL-запросы и native query, включая фильтрацию по вложенным сущностям.

## Транзакции

Проект демонстрирует транзакционную бизнес-логику и различия поведения при использовании @Transactional и без неё, включая сценарии частичного сохранения данных и полного отката при ошибках.

## Асинхронная обработка

Реализованы асинхронные операции для пересчёта статистики. API предоставляет возможность запуска фоновых задач и проверки их статуса выполнения.

## Кеширование и индексирование запросов

В приложении реализован механизм in-memory индексирования ранее выполненных запросов с корректной стратегией инвалидации при изменении данных.

## Логирование и AOP

Логирование настроено с использованием logback (уровни логирования, ротация логов). Реализован аспект (AOP) для измерения и логирования времени выполнения методов сервисного слоя.

## Тестирование

Реализованы unit-тесты сервисного слоя с использованием Mockito.

## Документация

REST API документировано с использованием Swagger / OpenAPI.

## Развёртывание

Приложение контейнеризировано с использованием Docker. Настроен Docker Compose для запуска приложения совместно с PostgreSQL. Конфигурация осуществляется через переменные окружения.

## CI/CD

Проект может быть интегрирован с GitHub Actions для автоматической сборки, тестирования и деплоя.

## Используемые технологии

- Spring Boot  
- Spring Data JPA  
- PostgreSQL  
- Jackson  
- Mockito  
- Swagger / OpenAPI  
- Docker  

## Принципы проектирования

Проект демонстрирует применение:

- ООП  
- SOLID  
- DRY  
- KISS  
- YAGNI  

Также показана работа ключевых механизмов Spring, включая ApplicationContext, dependency injection и сериализацию/десериализацию JSON с использованием Jackson.

## License

MIT
